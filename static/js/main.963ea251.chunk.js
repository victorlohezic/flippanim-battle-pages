(this["webpackJsonpbattle-system"]=this["webpackJsonpbattle-system"]||[]).push([[0],[,,function(e,a,t){e.exports={user:"styles_user__2KSwn",opponent:"styles_opponent__dull4",hud:"styles_hud__tNbde",hudChild:"styles_hudChild__NzEVA",gameHeader:"styles_gameHeader__1ujCt",summary:"styles_summary__3X_vY",characters:"styles_characters__31XjR",gameImages:"styles_gameImages__3XW2U",static:"styles_static__36JKT",playerSprite:"styles_playerSprite__2oElY",attack:"styles_attack__LNDOy",opponentSprite:"styles_opponentSprite__J_xLc",magic:"styles_magic__1rb3j",shake:"styles_shake__q_4Wr",damage:"styles_damage__2APU5",flash:"styles_flash__2jfkq"}},function(e,a,t){e.exports={main:"styles_main__2l0HZ",info:"styles_info__2MyK8",name:"styles_name__1EX6M",level:"styles_level__1OdYc"}},function(e,a,t){e.exports={main:"styles_main__8Ms8V",label:"styles_label__1Yhre",max:"styles_max__Xeu5g",value:"styles_value__2ztsv"}},function(e,a,t){e.exports={main:"styles_main__2Nvos",startButton:"styles_startButton__1Ga2G"}},function(e,a,t){e.exports={main:"styles_main__31vVM",option:"styles_option__39N1P"}},,function(e,a,t){e.exports={main:"styles_main__rWBi9",startButton:"styles_startButton__3bKxZ"}},function(e,a,t){e.exports={main:"styles_main__3wQVJ",message:"styles_message__2EyYT"}},,function(e,a,t){e.exports={main:"styles_main__T04P_"}},function(e,a,t){},,,,,,function(e,a,t){"use strict";t.r(a);t(12);var s=t(1),c=t.n(s),n=t(10),l=t.n(n),i=t(11),r=t.n(i);const m=e=>new Promise((a=>{setTimeout((()=>{a()}),e)}));var o={level:1,maxHealth:177,name:"H\xe9ros",img:"/assets/bouboule.gif",magic:32,attack:50,defense:30,magicDefense:30};const u={level:3,name:"Bouboule de feu",maxHealth:150,img:"https://raw.githubusercontent.com/victorlohezic/flippanim-battle-pages/main/public/assets/bouboule_de_feu.gif",magic:50,attack:32,defense:20,magicDefense:30};var d=t(0);const j=()=>{const[e,a]=Object(s.useState)(),[t,c]=Object(s.useState)("start");return Object(s.useEffect)((()=>{"battle"===t&&a(void 0)}),[t]),Object(d.jsxs)("div",{className:r.a.main,children:["start"===t&&Object(d.jsx)(k,{onStartClick:e=>{c("battle"),e&&(console.log("Chemin du fichier:",e),o.img=window.URL.createObjectURL(e),c("battle"))}}),"battle"===t&&Object(d.jsx)(O,{onGameEnd:e=>{a(e),c("gameOver")}}),"gameOver"===t&&!!e&&Object(d.jsx)(y,{winner:e,onStartClick:()=>c("battle")})]})};var b=t(4),h=t.n(b);const _=e=>{let{value:a,maxValue:t,label:s}=e;return Object(d.jsxs)("div",{className:h.a.main,children:[Object(d.jsx)("div",{className:h.a.label,children:s}),Object(d.jsx)("div",{className:h.a.max,children:Object(d.jsx)("div",{className:h.a.value,style:{width:"".concat(a/t*100,"%")}})})]})};var v=t(2),x=t.n(v);const O=e=>{let{onGameEnd:a}=e;const[t,c]=Object(s.useState)({}),{turn:n,inSequence:l,playerHealth:i,opponentHealth:r,playerAnimation:j,opponentAnimation:b,announcerMessage:h}=(e=>{const[a,t]=Object(s.useState)(0),[c,n]=Object(s.useState)(!1),[l,i]=Object(s.useState)(o.maxHealth),[r,d]=Object(s.useState)(u.maxHealth),[j,b]=Object(s.useState)(""),[h,_]=Object(s.useState)("static"),[v,x]=Object(s.useState)("static");return Object(s.useEffect)((()=>{const{mode:a,turn:s}=e;if(a){const e=0===s?o:u,c=0===s?u:o;switch(a){case"attack":{const a=(e=>{let{attacker:a,receiver:t}=e;return a.attack-1.25*(a.level-t.level)-t.defense/2})({attacker:e,receiver:c});(async()=>{n(!0),b("".concat(e.name," a choisi d'attaquer !")),await m(1e3),0===s?_("attack"):x("attack"),await m(100),0===s?_("static"):x("static"),await m(500),0===s?x("damage"):_("damage"),await m(750),0===s?x("static"):_("static"),b("".concat(c.name," a re\xe7u des d\xe9gats !")),0===s?d((e=>e-a>0?e-a:0)):i((e=>e-a>0?e-a:0)),await m(2e3),b("C'est au tour de ".concat(c.name," !")),await m(1500),t(0===s?1:0),n(!1)})();break}case"magic":{const a=(e=>{let{attacker:a,receiver:t}=e;return a.magic-1.25*(a.level-t.level)-t.magicDefense/2})({attacker:e,receiver:c});(async()=>{n(!0),b("".concat(e.name," a lanc\xe9 un sort !")),await m(1e3),0===s?_("magic"):x("magic"),await m(1e3),0===s?_("static"):x("static"),await m(500),0===s?x("damage"):_("damage"),await m(750),0===s?x("static"):_("static"),b("".concat(c.name," ne sait pas ce qui l'a frapp\xe9 !")),0===s?d((e=>e-a>0?e-a:0)):i((e=>e-a>0?e-a:0)),await m(2500),b("C'est au tour de ".concat(c.name," !")),await m(1500),t(0===s?1:0),n(!1)})();break}case"heal":{const a=(e=>{let{receiver:a}=e;return a.magic+.25*a.level})({receiver:e});(async()=>{n(!0),b("".concat(e.name," a choisi de se soigner !")),await m(1e3),0===s?_("magic"):x("magic"),await m(1e3),0===s?_("static"):x("static"),await m(500),b("".concat(e.name," a r\xe9cup\xe9r\xe9 de la vie.")),0===s?i((t=>t+a<=e.maxHealth?t+a:e.maxHealth)):d((t=>t+a<=e.maxHealth?t+a:e.maxHealth)),await m(2500),b("C'est au tour de ".concat(c.name," !")),await m(1500),t(0===s?1:0),n(!1)})();break}}}}),[e]),{turn:a,inSequence:c,playerHealth:l,opponentHealth:r,playerAnimation:h,opponentAnimation:v,announcerMessage:j}})(t),_=(e=>{const[a,t]=Object(s.useState)("");return Object(s.useEffect)((()=>{if(1===e){const e=["attack","magic","heal"];t(e[Math.floor(Math.random()*e.length)])}}),[e]),a})(n);return Object(s.useEffect)((()=>{_&&1===n&&!l&&c({turn:n,mode:_})}),[n,_,l]),Object(s.useEffect)((()=>{0!==i&&0!==r||(async()=>{await m(1e3),a(0===i?u:o)})()}),[i,r,a]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:x.a.opponent,children:Object(d.jsx)("div",{className:x.a.summary,children:Object(d.jsx)(B,{main:!1,health:r,name:u.name,level:u.level,maxHealth:u.maxHealth})})}),Object(d.jsxs)("div",{className:x.a.characters,children:[Object(d.jsxs)("div",{className:x.a.gameHeader,children:[o.name," vs ",u.name]}),Object(d.jsxs)("div",{className:x.a.gameImages,children:[Object(d.jsx)("div",{className:x.a.playerSprite,children:Object(d.jsx)("img",{alt:o.name,src:o.img,className:x.a[j]})}),Object(d.jsx)("div",{className:x.a.opponentSprite,children:Object(d.jsx)("img",{alt:u.name,src:u.img,className:x.a[b]})})]})]}),Object(d.jsxs)("div",{className:x.a.user,children:[Object(d.jsx)("div",{className:x.a.summary,children:Object(d.jsx)(B,{main:!0,health:i,name:o.name,level:o.level,maxHealth:o.maxHealth})}),Object(d.jsxs)("div",{className:x.a.hud,children:[Object(d.jsx)("div",{className:x.a.hudChild,children:Object(d.jsx)(q,{message:h||"Qu'est-ce que le ".concat(o.name," choisit de faire ?")})}),!l&&0===n&&Object(d.jsx)("div",{className:x.a.hudChild,children:Object(d.jsx)(H,{onHeal:()=>c({mode:"heal",turn:n}),onMagic:()=>c({mode:"magic",turn:n}),onAttack:()=>c({mode:"attack",turn:n})})})]})]})]})};var g=t(8),p=t.n(g);const y=e=>{let{winner:a,onStartClick:t}=e;return Object(d.jsxs)("div",{className:p.a.main,children:[Object(d.jsxs)("h1",{children:[a.name," a gagn\xe9 !"]}),Object(d.jsx)("button",{className:p.a.startButton,onClick:t,children:"Jouer \xe0 nouveau !"})]})};var f=t(5),N=t.n(f);const k=e=>{let{onStartClick:a}=e;const[t,c]=Object(s.useState)(null);return Object(d.jsxs)("div",{className:N.a.main,children:[Object(d.jsx)("input",{type:"file",id:"actual-btn",hidden:!0,onChange:e=>{const a=e.target.files[0];c(a)}}),Object(d.jsx)("label",{htmlFor:"actual-btn",className:N.a.startButton,children:"Charger l'image"}),t?Object(d.jsx)("button",{className:N.a.startButton,onClick:()=>a(t),children:"D\xe9marrer"}):Object(d.jsx)("button",{className:N.a.startButton,disabled:!0,children:"D\xe9marrer"})]})};var w=t(6),S=t.n(w);const H=e=>{let{onAttack:a,onMagic:t,onHeal:s}=e;return Object(d.jsxs)("div",{className:S.a.main,children:[Object(d.jsx)("div",{onClick:a,className:S.a.option,children:"Attaquer"}),Object(d.jsx)("div",{onClick:t,className:S.a.option,children:"Utiliser la magie"}),Object(d.jsx)("div",{onClick:s,className:S.a.option,children:"Se soigner"})]})};var C=t(3),E=t.n(C);const B=e=>{let{main:a,name:t,level:s,health:c,maxHealth:n}=e;return Object(d.jsxs)("div",{className:E.a.main,style:{backgroundColor:a?"#821400":"#1953cb"},children:[Object(d.jsxs)("div",{className:E.a.info,children:[Object(d.jsx)("div",{className:E.a.name,children:t}),Object(d.jsxs)("div",{className:E.a.level,children:["Lvl ",s]})]}),Object(d.jsx)("div",{className:E.a.health,children:Object(d.jsx)(_,{label:"HP",value:c,maxValue:n})})]})};var M=t(9),A=t.n(M);const q=e=>{let{message:a}=e;const t=(e=>{const[a,t]=Object(s.useState)("");return Object(s.useEffect)((()=>{t(""),e.length&&(async()=>{let a="";for(let s=0;s<e.length;s++)await m(25),a+=e[s],t(a)})()}),[e]),a})(a);return Object(d.jsx)("div",{className:A.a.main,children:Object(d.jsx)("div",{className:A.a.message,children:t})})};l.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(j,{})}),document.getElementById("root"))}],[[18,1,2]]]);
//# sourceMappingURL=main.963ea251.chunk.js.map