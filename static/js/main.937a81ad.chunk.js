(this["webpackJsonpbattle-system"]=this["webpackJsonpbattle-system"]||[]).push([[0],[,,function(e,a,t){e.exports={user:"styles_user__2KSwn",opponent:"styles_opponent__dull4",hud:"styles_hud__tNbde",hudChild:"styles_hudChild__NzEVA",gameHeader:"styles_gameHeader__1ujCt",summary:"styles_summary__3X_vY",characters:"styles_characters__31XjR",gameImages:"styles_gameImages__3XW2U",static:"styles_static__36JKT",playerSprite:"styles_playerSprite__2oElY",attack:"styles_attack__LNDOy",opponentSprite:"styles_opponentSprite__J_xLc",magic:"styles_magic__1rb3j",shake:"styles_shake__q_4Wr",damage:"styles_damage__2APU5",flash:"styles_flash__2jfkq"}},function(e,a,t){e.exports={main:"styles_main__2l0HZ",info:"styles_info__2MyK8",name:"styles_name__1EX6M",level:"styles_level__1OdYc"}},function(e,a,t){e.exports={main:"styles_main__8Ms8V",label:"styles_label__1Yhre",max:"styles_max__Xeu5g",value:"styles_value__2ztsv"}},function(e,a,t){e.exports={main:"styles_main__2Nvos",startButton:"styles_startButton__1Ga2G"}},function(e,a,t){e.exports={main:"styles_main__31vVM",option:"styles_option__39N1P"}},,function(e,a,t){e.exports={main:"styles_main__rWBi9",startButton:"styles_startButton__3bKxZ"}},function(e,a,t){e.exports={main:"styles_main__3wQVJ",message:"styles_message__2EyYT"}},,function(e,a,t){e.exports={main:"styles_main__T04P_"}},function(e,a,t){},,,,,,function(e,a,t){"use strict";t.r(a);t(12);var s=t(1),c=t.n(s),n=t(10),l=t.n(n),i=t(11),r=t.n(i);const m=e=>new Promise((a=>{setTimeout((()=>{a()}),e)}));var o={level:1,maxHealth:177,name:"Player",img:"/assets/bouboule.gif",magic:32,attack:50,defense:30,magicDefense:30};const d={level:3,name:"Bouboule de feu",maxHealth:150,img:"/assets/bouboule_de_feu.gif",magic:50,attack:32,defense:20,magicDefense:30};var j=t(0);const u=()=>{const[e,a]=Object(s.useState)(),[t,c]=Object(s.useState)("start");return Object(s.useEffect)((()=>{"battle"===t&&a(void 0)}),[t]),Object(j.jsxs)("div",{className:r.a.main,children:["start"===t&&Object(j.jsx)(k,{onStartClick:e=>{c("battle"),e&&(console.log("Chemin du fichier:",e),o.img=window.URL.createObjectURL(e),c("battle"))}}),"battle"===t&&Object(j.jsx)(O,{onGameEnd:e=>{a(e),c("gameOver")}}),"gameOver"===t&&!!e&&Object(j.jsx)(p,{winner:e,onStartClick:()=>c("battle")})]})};var _=t(4),h=t.n(_);const b=e=>{let{value:a,maxValue:t,label:s}=e;return Object(j.jsxs)("div",{className:h.a.main,children:[Object(j.jsx)("div",{className:h.a.label,children:s}),Object(j.jsx)("div",{className:h.a.max,children:Object(j.jsx)("div",{className:h.a.value,style:{width:"".concat(a/t*100,"%")}})})]})};var x=t(2),v=t.n(x);const O=e=>{let{onGameEnd:a}=e;const[t,c]=Object(s.useState)({}),{turn:n,inSequence:l,playerHealth:i,opponentHealth:r,playerAnimation:u,opponentAnimation:_,announcerMessage:h}=(e=>{const[a,t]=Object(s.useState)(0),[c,n]=Object(s.useState)(!1),[l,i]=Object(s.useState)(o.maxHealth),[r,j]=Object(s.useState)(d.maxHealth),[u,_]=Object(s.useState)(""),[h,b]=Object(s.useState)("static"),[x,v]=Object(s.useState)("static");return Object(s.useEffect)((()=>{const{mode:a,turn:s}=e;if(a){const e=0===s?o:d,c=0===s?d:o;switch(a){case"attack":{const a=(e=>{let{attacker:a,receiver:t}=e;return a.attack-1.25*(a.level-t.level)-t.defense/2})({attacker:e,receiver:c});(async()=>{n(!0),_("".concat(e.name," a choisi d'attaquer !")),await m(1e3),0===s?b("attack"):v("attack"),await m(100),0===s?b("static"):v("static"),await m(500),0===s?v("damage"):b("damage"),await m(750),0===s?v("static"):b("static"),_("".concat(c.name," a re\xe7u des d\xe9gats !")),0===s?j((e=>e-a>0?e-a:0)):i((e=>e-a>0?e-a:0)),await m(2e3),_("C'est au tour de ".concat(c.name," !")),await m(1500),t(0===s?1:0),n(!1)})();break}case"magic":{const a=(e=>{let{attacker:a,receiver:t}=e;return a.magic-1.25*(a.level-t.level)-t.magicDefense/2})({attacker:e,receiver:c});(async()=>{n(!0),_("".concat(e.name," a lanc\xe9 un sort !")),await m(1e3),0===s?b("magic"):v("magic"),await m(1e3),0===s?b("static"):v("static"),await m(500),0===s?v("damage"):b("damage"),await m(750),0===s?v("static"):b("static"),_("".concat(c.name," ne sait pas ce qui l'a frapp\xe9 !")),0===s?j((e=>e-a>0?e-a:0)):i((e=>e-a>0?e-a:0)),await m(2500),_("C'est au tour de ".concat(c.name," !")),await m(1500),t(0===s?1:0),n(!1)})();break}case"heal":{const a=(e=>{let{receiver:a}=e;return a.magic+.25*a.level})({receiver:e});(async()=>{n(!0),_("".concat(e.name," a choisi de se soigner !")),await m(1e3),0===s?b("magic"):v("magic"),await m(1e3),0===s?b("static"):v("static"),await m(500),_("".concat(e.name," a r\xe9cup\xe9r\xe9 de la vie.")),0===s?i((t=>t+a<=e.maxHealth?t+a:e.maxHealth)):j((t=>t+a<=e.maxHealth?t+a:e.maxHealth)),await m(2500),_("C'est au tour de ".concat(c.name," !")),await m(1500),t(0===s?1:0),n(!1)})();break}}}}),[e]),{turn:a,inSequence:c,playerHealth:l,opponentHealth:r,playerAnimation:h,opponentAnimation:x,announcerMessage:u}})(t),b=(e=>{const[a,t]=Object(s.useState)("");return Object(s.useEffect)((()=>{if(1===e){const e=["attack","magic","heal"];t(e[Math.floor(Math.random()*e.length)])}}),[e]),a})(n);return Object(s.useEffect)((()=>{b&&1===n&&!l&&c({turn:n,mode:b})}),[n,b,l]),Object(s.useEffect)((()=>{0!==i&&0!==r||(async()=>{await m(1e3),a(0===i?d:o)})()}),[i,r,a]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:v.a.opponent,children:Object(j.jsx)("div",{className:v.a.summary,children:Object(j.jsx)(B,{main:!1,health:r,name:d.name,level:d.level,maxHealth:d.maxHealth})})}),Object(j.jsxs)("div",{className:v.a.characters,children:[Object(j.jsxs)("div",{className:v.a.gameHeader,children:[o.name," vs ",d.name]}),Object(j.jsxs)("div",{className:v.a.gameImages,children:[Object(j.jsx)("div",{className:v.a.playerSprite,children:Object(j.jsx)("img",{alt:o.name,src:o.img,className:v.a[u]})}),Object(j.jsx)("div",{className:v.a.opponentSprite,children:Object(j.jsx)("img",{alt:d.name,src:d.img,className:v.a[_]})})]})]}),Object(j.jsxs)("div",{className:v.a.user,children:[Object(j.jsx)("div",{className:v.a.summary,children:Object(j.jsx)(B,{main:!0,health:i,name:o.name,level:o.level,maxHealth:o.maxHealth})}),Object(j.jsxs)("div",{className:v.a.hud,children:[Object(j.jsx)("div",{className:v.a.hudChild,children:Object(j.jsx)(q,{message:h||"Que ".concat(o.name," choisit de faire ?")})}),!l&&0===n&&Object(j.jsx)("div",{className:v.a.hudChild,children:Object(j.jsx)(H,{onHeal:()=>c({mode:"heal",turn:n}),onMagic:()=>c({mode:"magic",turn:n}),onAttack:()=>c({mode:"attack",turn:n})})})]})]})]})};var g=t(8),y=t.n(g);const p=e=>{let{winner:a,onStartClick:t}=e;return Object(j.jsxs)("div",{className:y.a.main,children:[Object(j.jsxs)("h1",{children:[a.name," has won!"]}),Object(j.jsx)("button",{className:y.a.startButton,onClick:t,children:"Play Again"})]})};var f=t(5),N=t.n(f);const k=e=>{let{onStartClick:a}=e;const[t,c]=Object(s.useState)(null);return Object(j.jsxs)("div",{className:N.a.main,children:[Object(j.jsx)("input",{type:"file",id:"actual-btn",hidden:!0,onChange:e=>{const a=e.target.files[0];c(a)}}),Object(j.jsx)("label",{htmlFor:"actual-btn",className:N.a.startButton,children:"Charger l'image"}),t?Object(j.jsx)("button",{className:N.a.startButton,onClick:()=>a(t),children:"D\xe9marrer"}):Object(j.jsx)("button",{className:N.a.startButton,disabled:!0,children:"D\xe9marrer"})]})};var w=t(6),S=t.n(w);const H=e=>{let{onAttack:a,onMagic:t,onHeal:s}=e;return Object(j.jsxs)("div",{className:S.a.main,children:[Object(j.jsx)("div",{onClick:a,className:S.a.option,children:"Attaquer"}),Object(j.jsx)("div",{onClick:t,className:S.a.option,children:"Utiliser la magie"}),Object(j.jsx)("div",{onClick:s,className:S.a.option,children:"Se soigner"})]})};var C=t(3),E=t.n(C);const B=e=>{let{main:a,name:t,level:s,health:c,maxHealth:n}=e;return Object(j.jsxs)("div",{className:E.a.main,style:{backgroundColor:a?"#821400":"#1953cb"},children:[Object(j.jsxs)("div",{className:E.a.info,children:[Object(j.jsx)("div",{className:E.a.name,children:t}),Object(j.jsxs)("div",{className:E.a.level,children:["Lvl ",s]})]}),Object(j.jsx)("div",{className:E.a.health,children:Object(j.jsx)(b,{label:"HP",value:c,maxValue:n})})]})};var M=t(9),A=t.n(M);const q=e=>{let{message:a}=e;const t=(e=>{const[a,t]=Object(s.useState)("");return Object(s.useEffect)((()=>{t(""),e.length&&(async()=>{let a="";for(let s=0;s<e.length;s++)await m(25),a+=e[s],t(a)})()}),[e]),a})(a);return Object(j.jsx)("div",{className:A.a.main,children:Object(j.jsx)("div",{className:A.a.message,children:t})})};l.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(u,{})}),document.getElementById("root"))}],[[18,1,2]]]);
//# sourceMappingURL=main.937a81ad.chunk.js.map